<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<article>
  <articleinfo>
    <title>Erl8583 - Getting Started</title>

    <author>
      <firstname>CA</firstname>

      <surname>Meijer</surname>

      <affiliation>
        <orgname>hammingweight@gmail.com</orgname>
      </affiliation>
    </author>

    <pubdate>May 2011</pubdate>
  </articleinfo>

  <section>
    <title>Introduction</title>

    <para>Erl8583 is an Erlang library for generating and parsing ISO 8583
    messages.</para>
  </section>

  <section>
    <title>ISO 8583</title>

    <para>ISO 8583 is a standard that defines message types and content for
    electronic transactions using payment cards like credit and debit cards.
    There are three versions of the standard from 1987, from 1993 and from
    2003. The 1987 standard is the most widely adopted. An ISO 8583 message
    consists of three parts:</para>

    <para><itemizedlist>
        <listitem>
          <para>A message type identifier (MTI)</para>
        </listitem>

        <listitem>
          <para>One or more bitmaps that indicate what data elements are
          present in the message</para>
        </listitem>

        <listitem>
          <para>Data elements that contain values relevant to the transaction,
          e.g. the transaction date and amount</para>
        </listitem>
      </itemizedlist></para>

    <para></para>

    <section>
      <title>Message Type Identifier (MTI)</title>

      <para>The MTI is a 4 (decimai) digit number that encodes:</para>

      <para><itemizedlist>
          <listitem>
            <para>The version of the standard. The first digit of the MTI can
            have the value '0', '1' or '2' indicating that the 1987, 1993 or
            2003 version is used.</para>
          </listitem>

          <listitem>
            <para>The message class. The second digit specifies the purpose of
            the message, e.g. '1' denotes an authorization message, '2'
            indicates a financial message and '8' specifies a network
            administration message. See the ISO specifcation for the full list
            of message classes.</para>
          </listitem>

          <listitem>
            <para>The message function. The third digit indicates whether the
            message is a request ('0'), a response ('1'), an advice ('2'),
            etc.</para>
          </listitem>

          <listitem>
            <para>The message origin. The fourth digit indicates where the
            message originated and whether the message is a repeat, e.g. '0'
            indicates that the message originated from an acquiring
            institution while '1' denotes that the message is a repeat from an
            acquiring institution.</para>
          </listitem>
        </itemizedlist></para>

      <para></para>
    </section>

    <section>
      <title>Bitmap</title>

      <para>The 1987 specification of ISO 8583 defines 128 data elements that
      may be present in a message. The 1993 and 2003 versions defines 192
      fields that can exist in a message. Each data element is identified by
      an integer value in the range 1-128 for the 1987 specification or 1-192
      for the later specifications. The sender indicates which data elements
      are present in a message by one or more bitmaps. A bitmap is a
      collection of 64 bits; if a bit is set in the bitmap it indicates that a
      corresponding data element is present.</para>

      <para>The primary bitmap is used to indicate the presence or absence of
      data elements 1-64. The secondary bitmap is used for fields 65-128. If
      no data elements with identifier 65 or greater is present, there is no
      need for the secondary bitmap. The secondary bitmap is actually data
      element 1, so if bit 1 is set in the primary bitmap it indicates that
      the message contains the secondary bitmap.</para>

      <para>The tertiary bitmap is used for fields 129-192. The tertiary
      bitmap is data element 65, so if bit 65 of the secondary bitmap is set
      it indicates that the tertiary bitmap is used.</para>

      <para></para>
    </section>

    <section>
      <title>Data Elements</title>

      <para>An ISO 8583 message contains fields that carry the transaction
      information. Specific examples of data elements that might exist in a
      message are (from the 1987 specification): <itemizedlist>
          <listitem>
            <para>Field 1, the secondary bitmap</para>
          </listitem>

          <listitem>
            <para>Field 2, the primary account number (PAN)</para>
          </listitem>

          <listitem>
            <para>Field 4, the transaction amount</para>
          </listitem>

          <listitem>
            <para>Field 35, track 2 data (data read from a card's magnetic
            stripe)</para>
          </listitem>

          <listitem>
            <para>Field 98, the payee</para>
          </listitem>
        </itemizedlist></para>

      <para>The fields listed above contain quite different data:
      <itemizedlist>
          <listitem>
            <para>Field 1 is binary data containing a sequence of bits</para>
          </listitem>

          <listitem>
            <para>Fields 2 and 4 contain numeric amounts</para>
          </listitem>

          <listitem>
            <para>Field 35 is encoded in a 4-bit format</para>
          </listitem>

          <listitem>
            <para>Field 98 contains a string with alphabetic characters</para>
          </listitem>
        </itemizedlist></para>

      <para>ISO 8583 provides a format for describing acceptable contents for
      a field and for whether the field has fixed length or variable. If the
      field is of variable length, the field value is preceded by a length
      value encoded as either 2 or 3 decimal digits depending on the maximum
      permissible length for the field.</para>

      <para></para>
    </section>
  </section>

  <section>
    <title>Erl8583</title>

    <para></para>
  </section>
</article>
